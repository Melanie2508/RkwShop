{namespace rkwShop=RKW\RkwShop\ViewHelpers}

<f:if condition="<rkwShop:ProductStock product='{product}' />">
    <f:then>
        <p class="order-list__status">
            <f:comment>
                <f:translate key="LLL:EXT:rkw_shop/Resources/Private/Language/locallang.xlf:partials.order.form.productList.input.stockLeft" arguments="{0: '{rkwShop:ProductStock(product: product)}'}"/>
            </f:comment>
            <f:translate key="LLL:EXT:rkw_shop/Resources/Private/Language/locallang.xlf:partials.order.form.productList.input.inStock" />
        </p>
        <!-- form -->
        <f:form action="addCartItem" controller="CartItem" name="product" id="product-{product.sku}" object="{product}">
            <f:render section="FieldOnly" arguments="{_all}" />
        </f:form>
    </f:then>
    <f:else>
        <f:if condition="<rkwShop:ProductStock product='{product}' preOrder='1' />">
            <f:then>
                <p class="order-list__status order-list__status--warn">
                    <f:translate key="LLL:EXT:rkw_shop/Resources/Private/Language/locallang.xlf:partials.order.form.productList.input.outOfStockPreOrder" />
                </p>
                <!-- form -->
                <f:form action="addCartItem" controller="CartItem" name="product" id="product-{product.sku}" object="{product}">
                    <f:render section="FieldOnly" arguments="{_all}" />
                </f:form>
            </f:then>
            <f:else>
                <p class="order-list__status order-list__status--warn">
                    <f:translate key="LLL:EXT:rkw_shop/Resources/Private/Language/locallang.xlf:partials.order.form.productList.input.outOfStock" />
                </p>
            </f:else>
        </f:if>
    </f:else>
</f:if>


<!-- separate section -->
<f:section name="FieldOnly">

    <div class="order-list__order">
        <f:form.textfield type="number" id="txrkwshop-amount-{product.uid}" name="amount" class="feedback-field" value="1"/>

        <f:if condition="{product.productType.isCollection} == 1">
            <f:then>
                <f:translate key="LLL:EXT:rkw_shop/Resources/Private/Language/locallang.xlf:partials.order.form.productList.input.amountBundle" />
            </f:then>
            <f:else>
                <f:translate key="LLL:EXT:rkw_shop/Resources/Private/Language/locallang.xlf:partials.order.form.productList.input.amountSingle" />
            </f:else>
        </f:if>

        <p>
            <button class="button" type="submit">
                <span><f:translate key="LLL:EXT:rkw_shop/Resources/Private/Language/locallang.xlf:partials.product.detail.form.addToCartButton" /></span>
            </button>
        </p>

    </div>
</f:section>